{"version":3,"sources":["functions/metadata-fetch.ts","lib/sort-utils.ts","contexts/university-data/index.tsx","lib/DarkMode/select-theme.ts","functions/pensum-converter.ts","functions/pensum-fetch.ts","functions/pensum-get-extras.ts","functions/pensum-save.ts","contexts/active-pensum/active-pensum-reducer.ts","contexts/active-pensum/index.tsx","components/PensumSelector.tsx","components/PensumDisplay/MatCode.tsx","lib/react-utils.tsx","components/PensumDisplay/PensumTable.tsx","components/PensumDisplay/PensumDisplay.tsx","components/PensumDisplay/index.tsx","components/PensumExtractor.tsx","lib/DarkMode/index.ts","lib/DarkMode/DarkModeSwitch.tsx","components/AppNavbar.tsx","components/AppFooter.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["UNIVERSITIES_PATH","BASE_PATH","CAREERS_FILE","a","fetch","response","json","unisObj","TypeError","universities","universityCode","university","api","careers","path","toLowerCase","carrerasObj","sortByProp","propList","length","b","prop","universityDataReducer","state","action","type","payload","selected","loading","error","console","initialUniversityData","UniversityContext","createContext","dispatch","UniversityProvider","memo","children","useReducer","useEffect","fetchUniversities","then","unis","u","sort","catch","e","finally","Provider","value","optionStyle","option","styles","data","isDisabled","isFocused","isSelected","color","undefined","selectTheme","theme","colors","primary","primary75","primary50","primary25","danger","dangerLight","neutral0","neutral5","neutral10","neutral20","neutral30","neutral40","neutral50","neutral60","neutral70","neutral80","neutral90","validatePensum","pensum","version","p","old","Number","process","institution","code","codigo","publishDate","vigencia","fetchDate","career","carrera","info","infoCarrera","loose","periods","cuats","warn","oldReqConverter","req","Array","isArray","oldmat2newmat","oldMat","newMat","name","asignatura","cr","creditos","prereq","coreq","push","prereqExtra","map","x","text","forEach","oldCuat","newCuat","loadPensum2","save","MatConverter","mat","period","loadPensumFromSavePensum","LOCAL_STORAGE_PREFIX","LOCAL_SERVER_PREFIX","fetchPensumFromCode","PensumFetchError","fetchPensumFromCode_localStorage","fetchPensumFromCode_localData","key","join","pensumData","localStorage","getItem","JSON","parse","message","Error","processPensumMats","list","periodMap","Map","codeMap","postreqMap","looseUnhandled","Set","matMap","matPeriod","matPostreq","mats","warnings","processMat","periodNum","has","set","periodIdx","get","matSet","keys","hasPostSet","from","filter","warning","mat2savemat","pensumToSavePensum","y","PENSUM_STORAGE_KEY","createPayload","matData","activePensumReducer","setItem","stringify","removeItem","savePensumToLocalStorage","loadPensumFromLocalStorage","defaultContext","ActivePensumContext","ActivePensumProvider","customDispatch","useCallback","err","SyntaxError","createLabelString","PensumSelector","useContext","activePensum","error_pensum","activePensumDispatcher","universityData","universityDispatcher","selectedUni","error_uni","useState","pensumList","setPensumList","pensumOnInput","setPensumOnInput","uni","find","careerOption","careerSelectOptions","label","universitySelectOptions","useMemo","shortName","longName","fetchCarreras","outForm","Form","onSubmit","evt","preventDefault","options","isSearchable","isLoading","onChange","newValue","className","isClearable","loadingMessage","Button","disabled","style","String","Card","Body","MatCode","content","arr","Boolean","TableHead","Row","Col","MatRow","cl","idx","reqs","i","Period","cuat","cumlen","PensumTable","sum","Container","PensumDisplay","Title","PensumExtractor","props","isCssInit","darkmode","setColorPreference","color_p","persist","initial","new_s","old_s","el","document","body","classList","add","remove","setTimeout","updateUI","id","querySelector","dataset","setAttribute","hrefDark","hrefLight","colorScheme","initColorCSS","el_o","el_l","el_d","getAttribute","DarkModeSwitch","dark","setDark","setDarkmode","OverlayTrigger","placement","overlay","Tooltip","checked","target","AppNavbar","navbarRef","useRef","prevScrollPos","window","scrollY","onScrollFn","current","currentScrollPos","addEventListener","removeEventListener","Navbar","ref","variant","fixed","Brand","AppFooter","href","App","Providers","fluid","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","osColorPreference","matchMedia","matches","preferredColorScheme","setThemePreferenceOnLoad","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.a63447ea.chunk.js","sourcesContent":["const BASE_PATH = './pensum';\r\nconst UNIVERSITIES_PATH = BASE_PATH + '/universities.json';\r\nconst CAREERS_FILE = 'index.json';\r\n\r\n/** Fetches universities.json */\r\nexport async function fetchUniversities() {\r\n  const response = await fetch(UNIVERSITIES_PATH);\r\n  const unisObj: PensumJson.Universities = await response.json();\r\n\r\n  if (typeof unisObj !== 'object') {\r\n    throw TypeError('Invalid universities.json format.');\r\n  }\r\n\r\n  // In the future, check if all props are valid.\r\n  if (!unisObj.universities) {\r\n    throw TypeError('Invalid universities.json format.');\r\n  }\r\n\r\n  return unisObj;\r\n}\r\n\r\n/** Fetches ./pensum/$UNIVERSITY/index.json */\r\nexport async function fetchCarreras(universityCode?: string) {\r\n  if (!universityCode) return {\r\n      university: '',\r\n      api: null,\r\n      careers: []\r\n  } as PensumJson.PensumIndex;\r\n\r\n  const path = BASE_PATH + '/' + universityCode.toLowerCase() + '/' + CAREERS_FILE\r\n  const response = await fetch(path);\r\n  const carrerasObj: PensumJson.PensumIndex = await response.json();\r\n\r\n  if (typeof carrerasObj !== 'object') {\r\n    throw TypeError('Invalid careers.json format.');\r\n  }\r\n\r\n  // In the future, check if all props are valid.\r\n  if ( !carrerasObj.api\r\n    || !carrerasObj.university\r\n    || !carrerasObj.careers\r\n  ) {\r\n    throw TypeError('Invalid careers.json format.');\r\n  }\r\n\r\n  return carrerasObj;\r\n}\r\n","export function sortByProp<T, K extends keyof T>(...propList: K[]) {\r\n  if (propList.length === 0) {\r\n    return (a: T, b: T) => (a > b) ? 1 : -1;\r\n  }\r\n\r\n  if (propList.length === 1) {\r\n    const prop = propList[0];\r\n    return (a: T, b: T) => (a[prop] > b[prop]) ? 1 : -1; \r\n  }\r\n\r\n  return (a: T, b: T) => {\r\n    for (let prop of propList) {\r\n      if (a[prop] > b[prop]) {\r\n        return 1;\r\n      }\r\n    }\r\n    return -1;\r\n  }\r\n}","import { fetchUniversities } from \"functions/metadata-fetch\"\r\nimport { sortByProp } from \"lib/sort-utils\"\r\nimport React, { createContext, memo, useEffect, useReducer } from \"react\"\r\n\r\nexport declare namespace UniversityData {\r\n  \r\n  /** List of universities/careers. */\r\n  type Payload = {\r\n    universities: PensumJson.University[],\r\n    selected: PensumJson.University | null,\r\n    loading: boolean,\r\n    error: string | null,\r\n  }\r\n\r\n  type Action = \r\n    | {\r\n      type: 'set/universities'\r\n      payload: Payload['universities']\r\n    }\r\n    | {\r\n      type: 'set/selected'\r\n      payload: Payload['selected']\r\n    }\r\n    | {\r\n      type: 'set/loading'\r\n      payload: Payload['loading']\r\n    }\r\n    | {\r\n      type: 'set/error'\r\n      payload: Payload['error']\r\n    }\r\n}\r\n\r\nfunction universityDataReducer(\r\n  state: UniversityData.Payload,\r\n  action: UniversityData.Action): UniversityData.Payload {\r\n  switch (action.type) {\r\n    case 'set/universities':\r\n      return {\r\n        ...state,\r\n        universities: action.payload\r\n      }\r\n\r\n    case 'set/selected':\r\n      return {\r\n        ...state,\r\n        selected: action.payload\r\n      }\r\n\r\n    case 'set/loading':\r\n      return {\r\n        ...state,\r\n        loading: action.payload\r\n      }\r\n\r\n    case 'set/error':\r\n      return {\r\n        ...state,\r\n        error: action.payload\r\n      }\r\n\r\n    default:\r\n      console.error('Unknown action: ', action);\r\n      return state;\r\n  }\r\n}\r\n\r\n/** Initial value for UniversityData */\r\nconst initialUniversityData: UniversityData.Payload = {\r\n  universities: [],\r\n  selected: null,\r\n  loading: true,\r\n  error: null,\r\n}\r\n\r\n\r\n// CONTEXT STUFF\r\n/** University data context. To be used with useContext() for getting selected university/careers. */\r\nexport const UniversityContext = createContext({\r\n  state: initialUniversityData, \r\n  dispatch: {} as React.Dispatch<UniversityData.Action>,\r\n});\r\n\r\ntype UniCtxProps = { children: any};\r\n\r\n/** Handles automatic load of university list. */\r\nexport const UniversityProvider = memo(function UniversityProvider({ children }: UniCtxProps) {\r\n  const [state, dispatch] = useReducer(universityDataReducer, initialUniversityData);\r\n\r\n  // onMount: load universities\r\n  useEffect(() => {\r\n    fetchUniversities()\r\n      .then(unis => {\r\n        const u = unis.universities.sort(sortByProp('longName'));\r\n        dispatch({ type: 'set/universities', payload: u })\r\n      })\r\n      .catch(e => {\r\n        dispatch({ type: 'set/error', payload: e })\r\n      })\r\n      .finally(() => {\r\n        dispatch({ type: 'set/loading', payload: false })\r\n      })\r\n  }, []);\r\n  \r\n  return <UniversityContext.Provider value={{ state, dispatch }}>\r\n    {children}\r\n  </UniversityContext.Provider>\r\n})\r\n\r\nexport default UniversityContext;","/**\r\n * Dark mode support styles for react-select components.\r\n */\r\n\r\nimport { StylesConfig, ThemeConfig } from \"react-select\";\r\nimport './theme.scss';\r\n\r\n/** Include this to allow dark mode toggling. */\r\nconst selectTheme: ThemeConfig = (theme) => ({\r\n  ...theme,\r\n  colors: {\r\n    ...theme.colors,\r\n    primary: 'var(--bs-primary)',   // Focus border\r\n    primary75: 'rgba(var(--bs-primary-rgb), 0.75)',\r\n    primary50: 'rgba(var(--bs-primary-rgb), 0.50)',\r\n    primary25: 'rgba(var(--bs-primary-rgb), 0.25)', // Selected Option color\r\n    danger: 'var(--bs-danger)',\r\n    dangerLight: 'rgba(var(--bs-danger-rgb), 0.25)',\r\n    neutral0: 'var(--bs-body-bg)',  // Background\r\n    neutral5: 'var(--th-gray-50)',\r\n    neutral10: 'var(--th-gray-100)',\r\n    neutral20: 'var(--th-gray-200)',  // Border\r\n    neutral30: 'var(--th-gray-300)',  // Border hover/focus\r\n    neutral40: 'var(--th-gray-400)',\r\n    neutral50: 'var(--th-gray-500)',  // Nothing selected\r\n    neutral60: 'var(--th-gray-600)',  // dropdown arrow (focus)\r\n    neutral70: 'var(--th-gray-700)',\r\n    neutral80: 'var(--th-gray-800)',  // Something selected\r\n    neutral90: 'var(--th-gray-900)',\r\n  }\r\n})\r\n\r\n/** Style override to make selected value visible on dark mode. */\r\nexport const optionStyle: StylesConfig = {\r\n  option: (styles, { data, isDisabled, isFocused, isSelected }) => ({\r\n    ...styles, \r\n    color: (isSelected) ? 'white' : undefined,\r\n  })\r\n}\r\n\r\nexport default selectTheme;","\r\n/** Converts a pensum from an old format to a new format. */\r\nexport function validatePensum(pensum: Pensum.Save.Legacy.Pensum2 | Pensum.Save.Pensum | null, university: string) {\r\n  // Nothing we can do about this :(\r\n  if (!pensum) return null;\r\n\r\n  // Legacy version\r\n  if (pensum.version <= 3) {\r\n    const p = loadPensum2(pensum as Pensum.Save.Legacy.Pensum2, university);\r\n    console.warn('Loaded pensum from old version!');\r\n    return p;\r\n  }\r\n\r\n  // Current version\r\n  if (pensum.version === 5) {\r\n    const p = loadPensumFromSavePensum(pensum);\r\n    return p;\r\n  }\r\n\r\n  console.warn('Pensum did not load correctly!', pensum);\r\n  return null;\r\n}\r\n\r\n/** Fixes the save form of a pensum, making sure that all its properties are set (eg. empty prereqs). */\r\nexport function loadPensumFromSavePensum(save: Pensum.Save.Pensum): Pensum.Pensum {\r\n  const MatConverter = (old: Pensum.Save.Mat): Pensum.Mat => {\r\n    const mat: Pensum.Mat = {\r\n      ...old,\r\n      prereq: (old.prereq) ? old.prereq : [],\r\n      coreq: (old.coreq) ? old.coreq : [],\r\n    };\r\n    \r\n    return mat;\r\n  }\r\n\r\n  const loose: Pensum.Mat[] = save.loose.map(mat => MatConverter(mat));\r\n  const periods: Pensum.Mat[][] = save.periods.map(\r\n    period => period.map(mat => MatConverter(mat)));\r\n  \r\n\r\n  return {\r\n    ...save,\r\n    loose,\r\n    periods,\r\n  };\r\n}\r\n\r\n/** Loads a legacy pensum, mapping the old properties to the new ones. */\r\nexport function loadPensum2(old: Pensum.Save.Legacy.Pensum2, university: string): Pensum.Pensum {\r\n  const pensum: Pensum.Pensum = {\r\n    version: Number(process.env.REACT_APP_SAVE_VERSION),\r\n    institution: university,\r\n    code: old.codigo,\r\n    publishDate: old.vigencia,\r\n    fetchDate: '2021-04-24',\r\n    career: old.carrera,\r\n    info: old.infoCarrera,\r\n    loose: [],\r\n    periods: [],\r\n  };\r\n\r\n  if (!(old.cuats && old.cuats.length)) {\r\n    console.warn(`Pensum ${old.codigo} (${old.carrera}) did not contain any cuat!`);\r\n    return pensum;\r\n  }\r\n\r\n  const oldReqConverter = (req: Pensum.Save.Legacy.Mat['prereq']): string[] => {\r\n    if (!req) return [];\r\n    if (typeof req === 'string') return [req];\r\n    if (Array.isArray(req)) return [...req];\r\n\r\n    console.warn('Unknown requirement!: ', req);\r\n    return [];\r\n  }\r\n\r\n  // Mat converter\r\n  const oldmat2newmat = (oldMat: Pensum.Save.Legacy.Mat) => {\r\n    const newMat: Pensum.Mat = {\r\n      code: oldMat.codigo,\r\n      name: oldMat.asignatura,\r\n      cr: oldMat.creditos,\r\n      prereq: [],\r\n      coreq: [],\r\n    };\r\n\r\n    newMat.prereq.push(...oldReqConverter(oldMat.prereq));\r\n    newMat.prereq.push(...oldReqConverter(oldMat.prereqExtra).map(x => ({ text: x })));\r\n    return newMat;\r\n  }\r\n\r\n  \r\n  old.cuats.forEach((oldCuat) => {\r\n    const newCuat = [];\r\n\r\n    for (const oldMat of oldCuat) {\r\n      const newMat = oldmat2newmat(oldMat);\r\n      newCuat.push(newMat);\r\n    }\r\n    \r\n    pensum.periods.push(newCuat);\r\n  });\r\n\r\n  return pensum;\r\n}\r\n\r\n/** Converts a pensum into its save form, reducing its size if no requirements are used for each Mat. */\r\nexport function convertPensumToSave(pensum: Pensum.Pensum): Pensum.Save.Pensum {\r\n  \r\n  const mat2savemat = (mat: Pensum.Mat): Pensum.Save.Mat => {\r\n    const out: any = {...mat};\r\n    if (out.prereq.length === 0) delete out.prereq;\r\n    if (out.coreq.length === 0) delete out.coreq;\r\n    \r\n    return out;\r\n  }\r\n  \r\n  const out = {\r\n    ...pensum,\r\n    loose: pensum.loose.map(mat => mat2savemat(mat)),\r\n    periods: pensum.periods.map(p => p.map(mat => mat2savemat(mat))),\r\n  };\r\n  \r\n\r\n  return out;\r\n}","import { validatePensum } from \"./pensum-converter\";\r\n\r\nexport const LOCAL_STORAGE_PREFIX = 'pensumextractor';\r\nexport const LOCAL_SERVER_PREFIX = './pensum';\r\n\r\n/**\r\n * Tries to load from the given pensum code from a university.\r\n * \r\n * Lookup order:\r\n *  1. `localStorage`\r\n *  2. local data (`pensum/university/CODE.json`)\r\n *  3. from url\r\n */\r\nexport async function fetchPensumFromCode(university?: string, code?: string) {\r\n  if (!university || !code) throw new PensumFetchError('No university or code provided!');//return null;\r\n\r\n  let pensum: Pensum.Pensum | null;\r\n\r\n  pensum = await fetchPensumFromCode_localStorage(university, code);\r\n  if (pensum) return pensum;\r\n\r\n  pensum = await fetchPensumFromCode_localData(university, code);\r\n  if (pensum) return pensum;\r\n\r\n  // Don't return null!\r\n  // Instead throw error, so this gets catched.\r\n  throw new PensumFetchError(`Unable to fetch pensum with identifier ${university}/${code}`);\r\n  return null;\r\n}\r\n\r\n/** \r\n * Tries to fetch the pensum from `localStorage`.\r\n * \r\n * **Important note!** This only does fetch. The saving to `localStorage` will be done at window.unload.\r\n */\r\nexport async function fetchPensumFromCode_localStorage(university: string, code: string) {\r\n  const key = [LOCAL_STORAGE_PREFIX, university, code].join('_');\r\n  const pensumData = localStorage.getItem(key);\r\n\r\n  if (!pensumData) return null; // Could not fetch\r\n\r\n  // Parse fetched data\r\n  // TODO: CHECK IF DATA IS VALID\r\n  const pensum = JSON.parse(pensumData) as Pensum.Save.Pensum;\r\n  return validatePensum(pensum, university);\r\n}\r\n\r\n\r\n/** Tries to fetch the pensum from `./pensum/$UNIVERSIDAD.` */\r\nexport async function fetchPensumFromCode_localData(university: string, code: string) {\r\n  const path = [LOCAL_SERVER_PREFIX, university, code].join('/') + '.json';\r\n\r\n  let pensumData: Pensum.Save.Pensum;\r\n  try {\r\n    const response = await fetch(path);\r\n    pensumData = await response.json();\r\n  } catch {\r\n    return null;\r\n  }\r\n\r\n  return validatePensum(pensumData, university);\r\n}\r\n\r\n\r\nexport class PensumFetchError extends Error {\r\n  constructor(message?: string) {\r\n    // Pass remaining arguments (including vendor specific ones) to parent constructor\r\n    super(message);\r\n  }\r\n}","\r\ntype MatExtraData = {\r\n  /** List of all mats */\r\n  list: Pensum.Mat[],\r\n  /** Map: code<string> -> period<number> */\r\n  periodMap: Map<string, number>,\r\n  /** Map : code<string> -> mat<Mat> */\r\n  codeMap: Map<string, Pensum.Mat>, \r\n  /** Map: code<string> -> postreqs<string> */\r\n  postreqMap: Map<string, string[]>,\r\n  /** List of mats that are prereqs but are not registered. */\r\n  looseUnhandled: Set<string>,\r\n}\r\n\r\n/** Gets all the extra data of a pensum's mats. */\r\nexport function processPensumMats(pensum: Pensum.Pensum | null): MatExtraData {\r\n  if (!pensum) return {\r\n    list: [],\r\n    periodMap: new Map(),\r\n    codeMap: new Map(),\r\n    postreqMap: new Map(),\r\n    looseUnhandled: new Set(),\r\n  };\r\n\r\n  const matMap = new Map<string, Pensum.Mat>();\r\n  const matPeriod = new Map<string, number>();\r\n  const matPostreq = new Map<string, string[]>();\r\n  const mats: Pensum.Mat[] = [];\r\n  const warnings: { code: string, text: string }[] = [];\r\n\r\n  const processMat = (mat: Pensum.Mat, periodNum: number) => {\r\n    if (matMap.has(mat.code)) \r\n      warnings.push({code: mat.code, text: 'was already registered!'});\r\n\r\n    // Add to all lists/maps/sets\r\n    matMap.set(mat.code, mat);\r\n    matPeriod.set(mat.code, periodNum);\r\n    mats.push(mat);\r\n  }\r\n\r\n\r\n  // Loose mats have period 0\r\n  pensum.loose.forEach(mat => processMat(mat, 0));\r\n\r\n  pensum.periods.forEach((period, periodIdx) => {\r\n    period.forEach(mat => processMat(mat, periodIdx + 1));\r\n  });\r\n\r\n\r\n  // After all mats are registered, get postreqs\r\n  for (const mat of mats) {\r\n    const code = mat.code;\r\n\r\n    for (const prereq of mat.prereq) {\r\n      if (typeof prereq === 'string') { // Only select codes, not {text: ''}\r\n\r\n        // Add or create new list\r\n        const list = matPostreq.get(prereq);\r\n        if (list) list.push(code);\r\n        else matPostreq.set(prereq, [code]);\r\n\r\n      }\r\n    }\r\n  }\r\n\r\n  // Get unhandled loose mats\r\n  const matSet = new Set(matMap.keys());\r\n  const hasPostSet = new Set(matPostreq.keys());\r\n  \r\n  // Codes that are prereqs to something but do not exist on mats.\r\n  const looseUnhandled = new Set(\r\n    Array.from(hasPostSet).filter(x => !matSet.has(x)));\r\n\r\n\r\n  // Play all the warnings\r\n  for (const warning of warnings) {\r\n    console.warn(`Warning at pensum-get-extras [${warning.code}]: ${warning.text}`);\r\n  }\r\n\r\n\r\n\r\n  return {\r\n    /** List of all mats */\r\n    list: mats,\r\n    /** Map: code<string> -> period<number> */\r\n    periodMap: matPeriod,\r\n    /** Map : code<string> -> mat<Mat> */\r\n    codeMap: matMap, \r\n    /** Map: code<string> -> postreqs<string> */\r\n    postreqMap: matPostreq,\r\n    /** List of mats that are prereqs but are not registered. */\r\n    looseUnhandled: looseUnhandled,\r\n  }\r\n}\r\n\r\nexport default processPensumMats;","/** Omits prereq | coreq if empty. */\r\nfunction mat2savemat(mat: Pensum.Mat): Pensum.Save.Mat {\r\n  const save: Pensum.Save.Mat = { ...mat };\r\n\r\n  if (save.prereq && save.prereq.length === 0)\r\n    delete save.prereq;\r\n  if (save.coreq && save.coreq.length === 0)\r\n    delete save.coreq;\r\n\r\n  return save;\r\n}\r\n\r\n/** This function removes any empty parameters to make the savepensum smaller. */\r\nfunction pensumToSavePensum(pensum: Pensum.Pensum): Pensum.Save.Pensum {\r\n  const save = {\r\n    ...pensum,\r\n    loose: pensum.loose.map(x => mat2savemat(x)),\r\n    periods: pensum.periods.map(x => x.map(y => mat2savemat(y))),\r\n  };\r\n\r\n  return save;\r\n}\r\n\r\nexport default pensumToSavePensum;","import { validatePensum } from \"functions/pensum-converter\";\r\nimport pensumToSavePensum from \"functions/pensum-save\";\r\nimport processPensumMats from \"functions/pensum-get-extras\";\r\n\r\nexport declare namespace ActivePensum {\r\n\r\n  /** List of universities/careers. */\r\n  type Payload = {\r\n    pensum: Pensum.Pensum | null,\r\n    matData: ReturnType<typeof processPensumMats>,\r\n    error: any | null,\r\n  };\r\n\r\n  type Action =\r\n    | {\r\n      type: 'set'\r\n      payload: Payload['pensum']\r\n    }\r\n    | {\r\n      type: 'clear' | 'load/fromSave'\r\n    }\r\n    | {\r\n      type: 'load'\r\n      payload: {\r\n        university: string,\r\n        code: string,\r\n      }\r\n    }\r\n    | {\r\n      type: 'error',\r\n      payload: Payload['error']\r\n    }\r\n}\r\n\r\nconst PENSUM_STORAGE_KEY = 'pensumData';\r\n\r\nexport function savePensumToLocalStorage(pensum: Pensum.Pensum | null) {\r\n  if (!pensum) {\r\n    localStorage.removeItem(PENSUM_STORAGE_KEY);\r\n    return;\r\n  }\r\n\r\n  var save = pensumToSavePensum(pensum);\r\n  localStorage.setItem(PENSUM_STORAGE_KEY, JSON.stringify(save));\r\n}\r\n\r\nexport function loadPensumFromLocalStorage(): Pensum.Pensum | null {\r\n  const pensumData = localStorage.getItem(PENSUM_STORAGE_KEY);\r\n\r\n  if (!pensumData) return null; // Could not fetch\r\n\r\n  // Parse fetched data\r\n  // TODO: CHECK IF DATA IS VALID\r\n  const pensum = JSON.parse(pensumData) as Pensum.Save.Pensum;\r\n  const loadedPensum = validatePensum(pensum, pensum.institution);\r\n  return loadedPensum;\r\n}\r\n\r\n\r\nfunction createPayload(pensum: ActivePensum.Payload['pensum']): ActivePensum.Payload {\r\n  return {\r\n    pensum, \r\n    matData: processPensumMats(pensum),\r\n    error: null,\r\n  }\r\n\r\n}\r\n\r\nexport function activePensumReducer(\r\n  state: ActivePensum.Payload,\r\n  action: ActivePensum.Action): ActivePensum.Payload {\r\n  switch (action.type) {\r\n    case 'clear':\r\n      // savePensumToLocalStorage(null); // Dont clear save!\r\n      return createPayload(null);\r\n\r\n    case 'set':\r\n      savePensumToLocalStorage(action.payload);\r\n      return createPayload(action.payload);\r\n\r\n    case 'load/fromSave':\r\n      var pensum = loadPensumFromLocalStorage();\r\n      return createPayload(pensum);\r\n\r\n    // Case for 'load' is handled on the Provider, since its async!\r\n\r\n    case 'error':\r\n      console.error(action.payload);\r\n      return {\r\n        ...state,\r\n        error: action.payload,\r\n      };\r\n\r\n    default:\r\n      console.error('Unknown action \"' + action.type + '\".');\r\n      return state;\r\n  }\r\n}","import { fetchPensumFromCode, PensumFetchError } from \"functions/pensum-fetch\";\r\nimport processPensumMats from \"functions/pensum-get-extras\";\r\nimport { createContext, memo, useCallback, useEffect, useReducer } from \"react\";\r\nimport { ActivePensum, activePensumReducer } from \"./active-pensum-reducer\";\r\n\r\n\r\ntype ActivePensumContextProps = {\r\n  state: ActivePensum.Payload,\r\n  dispatch: (action: ActivePensum.Action) => any,\r\n}\r\n\r\nconst defaultContext: ActivePensumContextProps = {\r\n  state: {\r\n    pensum: null,\r\n    matData: processPensumMats(null),\r\n    error: null,\r\n  },\r\n  dispatch: () => {},\r\n}\r\n\r\n\r\n/** Context for the current loaded pensum. */\r\nconst ActivePensumContext = createContext(defaultContext);\r\n\r\ntype Props = { children: any};\r\n\r\n// this double naming thing is so the React chrome extension gets the name correctly.\r\nexport const ActivePensumProvider = memo(function ActivePensumProvider({ children }: Props) { \r\n  const [state, dispatch] = useReducer(activePensumReducer, defaultContext.state);\r\n\r\n  // onMount: load saved pensum\r\n  useEffect(() => {\r\n    dispatch({type: 'load/fromSave'});\r\n  }, []);\r\n\r\n  // Custom dispatch with async, non-pure code (fetchPensum).\r\n  const customDispatch = useCallback(async (action) => {\r\n    switch (action.type) {\r\n      case 'load':\r\n        const {university, code} = action.payload;\r\n        try {\r\n          const pensum = await fetchPensumFromCode(university, code);\r\n          dispatch({ type: 'set', payload: pensum });\r\n        }\r\n        catch(error) {\r\n          const err = { type: 'error' as 'error', payload: undefined as any };\r\n          if (error instanceof SyntaxError)\r\n            err.payload = `JSON could not be parsed for ${university}/${code}.`;\r\n          else if (error instanceof PensumFetchError)\r\n            err.payload = error.message;\r\n          else\r\n            err.payload = error;\r\n\r\n          dispatch(err);\r\n        }\r\n        finally {\r\n          break;\r\n        }\r\n\r\n      default:\r\n        dispatch(action);\r\n    }\r\n  }, []);\r\n  \r\n  return <ActivePensumContext.Provider value={{ state, dispatch: customDispatch }}>\r\n    {children}\r\n  </ActivePensumContext.Provider>\r\n})\r\n\r\n\r\nexport default ActivePensumContext;","import { fetchCarreras } from \"functions/metadata-fetch\";\r\nimport UniversityContext from \"contexts/university-data\";\r\nimport { useContext, useEffect, useMemo, useState } from \"react\";\r\n\r\nimport Form from \"react-bootstrap/Form\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport Card from \"react-bootstrap/Card\";\r\n\r\nimport Select from \"react-select\";\r\nimport CreatableSelect from \"react-select/creatable\";\r\nimport selectTheme, { optionStyle } from \"lib/DarkMode/select-theme\";\r\nimport { sortByProp } from \"lib/sort-utils\";\r\nimport ActivePensumContext from \"contexts/active-pensum\";\r\n\r\n// type SelectProps = React.ComponentProps<typeof Select>['onChange'];\r\ntype SelectProps = { label: string, value: string } | null;\r\n\r\n/** Creates a formatted label, for use with this component's <Select> labels. */\r\nfunction createLabelString(code: string, name: string) {\r\n  return `[${code}] ${name}`;\r\n}\r\n\r\n/** Simple form that manages University and Career selection \r\n * (Populates the university/career list from the server.). \r\n * Also loads the required pensum. */\r\nfunction PensumSelector() {\r\n  const { state: { pensum: activePensum, error: error_pensum }, dispatch: activePensumDispatcher } = useContext(ActivePensumContext);\r\n  const { state: universityData, dispatch: universityDispatcher } = useContext(UniversityContext);\r\n  const {universities, selected: selectedUni, loading, error: error_uni} = universityData;\r\n\r\n  const [pensumList, setPensumList] = useState(undefined as PensumJson.PensumIndex | undefined);\r\n  const [pensumOnInput, setPensumOnInput] = useState(null as SelectProps);\r\n\r\n\r\n  // On active pensum change (may be triggered by this same element, or not?)\r\n  useEffect(() => {\r\n    if (activePensum) {\r\n      // Set selected university\r\n      const uni = universities.find(x => x.code === activePensum.institution);\r\n      if (uni) universityDispatcher({ type: 'set/selected', payload: uni });\r\n\r\n      // Set career\r\n      const careerOption = careerSelectOptions.find(x => x.value === activePensum.code)\r\n        || {\r\n        value: activePensum.code,\r\n        label: createLabelString(activePensum.code, activePensum.career),\r\n      };\r\n      setPensumOnInput(careerOption);\r\n\r\n    } else {\r\n      setPensumOnInput(null);\r\n    }\r\n  }, [\r\n    activePensum,\r\n    activePensum?.code,\r\n    activePensum?.career,\r\n    activePensum?.institution\r\n  ]);\r\n\r\n\r\n  // University select options\r\n  const universitySelectOptions = useMemo(() =>\r\n    universityData.universities.map(\r\n      x => ({ value: x.code, label: createLabelString(x.shortName, x.longName) })),\r\n    [universityData, universityData.universities]);\r\n\r\n\r\n  // Update the university list if university changes\r\n  useEffect(() => {\r\n    universityDispatcher({type: \"set/selected\", payload: universities[0] || null});\r\n  }, [universities]);\r\n\r\n\r\n  // On user change university selection\r\n  const handleUniversityChange = (newValue: SelectProps) => {\r\n    if (!newValue) {\r\n      universityDispatcher({type: \"set/selected\", payload: null})\r\n      return;\r\n    }\r\n    \r\n    const selected = universities.find(x => x.code === newValue.value) || null;\r\n    universityDispatcher({ type: \"set/selected\", payload: selected });\r\n      \r\n    if (newValue.value !== selected?.code)\r\n      setPensumOnInput(null);\r\n  }\r\n\r\n\r\n\r\n  // Carrera select options\r\n  const careerSelectOptions = useMemo(() => {\r\n    if (!pensumList) return [];\r\n\r\n    const o = pensumList.careers.sort(sortByProp(\"code\"));\r\n\r\n    return o.map(x => ({ value: x.code, label: createLabelString(x.code, x.name) }));\r\n  }, [pensumList]);\r\n\r\n\r\n  // Fetch new carreras if university changes\r\n  useEffect(() => {\r\n    // No university selected. No pensum on the index.\r\n    if (!selectedUni) {\r\n      setPensumList(undefined);\r\n      setPensumOnInput(null);\r\n      return;\r\n    }\r\n\r\n    // Start fetching pensum index list.\r\n    universityDispatcher({ type: \"set/loading\", payload: true })\r\n    fetchCarreras(selectedUni?.code)\r\n      .then(pensumList => {\r\n        setPensumList(pensumList)\r\n      })\r\n      .catch(e => {\r\n        console.warn(`Unable to load pensums for ${selectedUni?.code}: `, e);\r\n        setPensumList(undefined)\r\n      })\r\n      .finally(() => {\r\n        universityDispatcher({ type: \"set/loading\", payload: false })\r\n      })\r\n  }, [selectedUni, universityDispatcher]);\r\n\r\n  const handlePensumChange = (newValue: SelectProps) => {\r\n    setPensumOnInput(newValue);\r\n  }\r\n\r\n\r\n\r\n  // On submit\r\n  const handleSubmit = (evt: any) => {\r\n    evt.preventDefault();\r\n    activePensumDispatcher({type: 'load', payload: {\r\n      university: selectedUni?.code || '',\r\n      code: pensumOnInput?.value || '',\r\n    }});\r\n  }\r\n\r\n\r\n  const outForm = (\r\n    <Form onSubmit={handleSubmit}>\r\n\r\n      <Select\r\n        // defaultValue={universitySelectOptions[0]}\r\n        value={universitySelectOptions.find(x => x.value === selectedUni?.code)}\r\n        options={universitySelectOptions}\r\n        isSearchable={true}\r\n        isLoading={loading}\r\n        onChange={handleUniversityChange as any} // as any to be able to use selectStyles without TS panicking.\r\n        name=\"university\" \r\n        className=\"mb-2\"\r\n        theme={selectTheme}\r\n        styles={optionStyle}/>\r\n\r\n      <CreatableSelect\r\n        isClearable\r\n        value={pensumOnInput}\r\n        options={careerSelectOptions}\r\n        isLoading={loading}\r\n        loadingMessage={() => <span>Cargando carreras...</span>}\r\n        onChange={handlePensumChange as any} // as any to be able to use selectStyles\r\n        className=\"mb-2\"\r\n        theme={selectTheme}\r\n        styles={optionStyle}/>\r\n\r\n      <Button\r\n        type=\"submit\"\r\n        disabled={!pensumOnInput}\r\n        className=\"w-100\">\r\n      Cargar\r\n      </Button>\r\n\r\n      {error_uni && <p style={{ color: 'red' }}>{'Error @ uni: ' + String(error_uni)}</p>}\r\n      {error_pensum && <p style={{ color: 'red' }}>{'Error @ pensum: ' + String(error_pensum)}</p>}\r\n    </Form>)\r\n\r\n\r\n  return (\r\n    <Card>\r\n      <Card.Body>\r\n        {outForm}\r\n      </Card.Body>\r\n    </Card>\r\n  )\r\n}\r\n\r\nexport default PensumSelector;","import ActivePensumContext from 'contexts/active-pensum';\r\nimport { classnames } from 'lib/react-utils';\r\nimport { useContext } from 'react';\r\nimport './mat-code.scss';\r\n\r\n\r\ntype Props = {\r\n  data: string | {text: string},\r\n  type: 'prereq' | 'coreq'\r\n}\r\n\r\n/** Single matcode. */\r\nfunction MatCode({ data, type }: Props) {\r\n  const { state: { matData } } = useContext(ActivePensumContext);\r\n  let className = ['mat-code', type];\r\n\r\n  let content;\r\n  if (typeof data === 'string') {\r\n    content = data;\r\n    className.push('code');\r\n\r\n    if (matData.looseUnhandled.has(data)) \r\n      className.push('missing');\r\n\r\n    \r\n\r\n  } else {\r\n    content = data.text;\r\n    className.push('req-text');\r\n  }\r\n\r\n  return (<span className={classnames(className)}>{content}</span>)\r\n}\r\n\r\nexport default MatCode;","/** \r\n * Joins an array of classes into a className string.\r\n * @example\r\n * // returns 'card backdrop red'\r\n * let isRed = true;\r\n * classnames(['card', 'backdrop', isRed && 'red']);\r\n * @returns The joined strings, but only from items whose values are truthy.\r\n * */\r\nexport const classnames = (arr: any[]) => arr.filter(Boolean).join(' ');","import './table.scss';\r\nimport Container from 'react-bootstrap/Container';\r\nimport Row from 'react-bootstrap/Row';\r\nimport Col from 'react-bootstrap/Col';\r\nimport MatCode from './MatCode';\r\n\r\ntype Props = {\r\n  pensum: Pensum.Pensum\r\n}\r\n\r\n/** Headers for the pensum table. */\r\nfunction TableHead() {\r\n  return <Row className=\"pensum-header row-period\">\r\n    <Col className=\"row-period-num\">Qt.</Col>\r\n    <Col className=\"row-mat-group\">\r\n      <Row className=\"row-mat\">\r\n        <Col className=\"row-code\">CÃ³digo</Col>\r\n        <Col>\r\n          <Row>\r\n            <Col className=\"row-name\">Asignatura</Col>\r\n            <Col className=\"row-cr\">Cr.</Col>\r\n            <Col className=\"row-prereq\">Requisitos</Col>\r\n          </Row>\r\n        </Col>\r\n      </Row>\r\n    </Col>\r\n  </Row>\r\n}\r\n\r\n/** Displays a single Mat as from the pensum a table row. */\r\nfunction MatRow({ mat, idx }: { mat: Pensum.Mat, idx: number }) {\r\n  var cl = \"row-mat\";\r\n  if (idx & 1) cl += ' even'; // technically should be odd, but i don't care enough.\r\n\r\n  const reqs = [] as JSX.Element[];\r\n  // reqs.push(...mat.prereq.map((x, i) => <span key={i}>{(typeof x === 'string') ? x : x.text} </span>));\r\n  // reqs.push(...mat.coreq.map((x, i) => <span key={i+1000}>{(typeof x === 'string') ? x : x.text} </span>));\r\n  reqs.push(...mat.prereq.map((x, i) => <MatCode key={i} data={x} type='prereq'/>));\r\n\r\n  return <Row className={cl} data-mat={mat.code}>\r\n    <Col className=\"row-code code\">{mat.code}</Col>\r\n    <Col>\r\n      <Row>\r\n        <Col className=\"row-name\">{mat.name}</Col>\r\n        <Col className=\"row-cr\">{mat.cr}</Col>\r\n        <Col className=\"row-req\">{reqs}</Col>\r\n      </Row>\r\n    </Col>\r\n  </Row>\r\n}\r\n\r\n/** Displays a single period from the pensum as table rows. */\r\nexport function Period({ period, cuat, cumlen = 0 }: { period: Pensum.Mat[], cuat: number, cumlen: number}) {\r\n\r\n  return <Row className=\"row-period\">\r\n    <Col className=\"row-period-num\" data-value={cuat + 1}>{cuat + 1}</Col> {/** TODO: Poner en variable global si se maneja por \"cuatrimestre/trimestre/semestre\", y reflejar aqui. */}\r\n    <Col className=\"row-mat-group\">{period.map((mat, i) =>\r\n      <MatRow\r\n        key={mat.code}\r\n        mat={mat}\r\n        idx={i + cumlen} />\r\n    )}\r\n    </Col>\r\n  </Row>\r\n}\r\n\r\n/** Displays a pensum. */\r\nfunction PensumTable({ pensum }: Props) {\r\n  const { periods } = pensum;\r\n\r\n  // https://stackoverflow.com/a/55261098\r\n  // CumLen is passed down to calculate if a row is even or odd.\r\n  const cumulativeSum = (sum: number) => (value: number) => sum += value;\r\n  const cumlen = periods.map(x => x.length).map(cumulativeSum(0))\r\n\r\n  return <Container className=\"pensum-table\">\r\n    <TableHead />\r\n    {periods.map((period, key) =>\r\n      <Period\r\n        key={key}\r\n        period={period}\r\n        cuat={key}\r\n        cumlen={cumlen[key - 1]} />\r\n    )}\r\n  </Container>\r\n}\r\n\r\nexport default PensumTable;","import Card from 'react-bootstrap/Card';\r\nimport PensumTable from \"./PensumTable\";\r\n\r\ntype Props = {\r\n  pensum: Pensum.Pensum\r\n}\r\n\r\nfunction PensumDisplay({ pensum }: Props) {\r\n\r\n\r\n  return <>\r\n    <Card>\r\n      <Card.Body className=\"pensum-table-container\">\r\n        <Card.Title>{pensum.career}</Card.Title>\r\n        <PensumTable pensum={pensum} />\r\n      </Card.Body>\r\n    </Card>\r\n  </>\r\n}\r\n\r\nexport default PensumDisplay;","import PensumDisplay from \"./PensumDisplay\";\r\n\r\nexport default PensumDisplay;","import { useContext } from \"react\";\r\nimport PensumSelector from \"./PensumSelector\";\r\nimport PensumDisplay from \"components/PensumDisplay\";\r\nimport ActivePensumContext from \"contexts/active-pensum\";\r\n\r\n\r\ntype Props = any;\r\n\r\nfunction PensumExtractor(props: Props) {\r\n  const { state: activePensum } = useContext(ActivePensumContext);\r\n  const pensum = activePensum.pensum;\r\n\r\n  return (<>  \r\n    <PensumSelector />\r\n\r\n    {pensum && <PensumDisplay pensum={pensum} />}\r\n  </>)\r\n} \r\n\r\nexport default PensumExtractor;","\r\n// Src: https://github.com/vinorodrigues/bootstrap-dark-5/blob/main/examples/cheatsheet-night.html\r\n// parts from: https://radek.io/posts/secret-darkmode-toggle/\r\n\r\nvar isCssInit = false;\r\nvar darkmode = false;\r\n\r\nfunction setColorPreference(color_p: string, persist = false, initial = false) {\r\n  const new_s = color_p;\r\n  const old_s = color_p === 'light' ? 'dark' : 'light'\r\n\r\n  const el = document.body;  // gets root <html> tag\r\n  el.classList.add('color-scheme-' + new_s);\r\n  el.classList.remove('color-scheme-' + old_s);\r\n\r\n  // Background transitions ONLY on switching theme\r\n  if (!initial) {\r\n    el.classList.add('color-scheme-transition');\r\n    setTimeout(() => {\r\n      el.classList.remove('color-scheme-transition');\r\n    }, 500);\r\n  }\r\n\r\n  if (persist) {\r\n    localStorage.setItem('preferred-color-scheme', color_p);\r\n  }\r\n}\r\n\r\nfunction updateUI(color_p: string, id = 'css') {\r\n  // toggle_btn.checked = color_p === 'dark';\r\n\r\n  if (isCssInit) {\r\n    const el = document.querySelector('#' + id) as HTMLElement;\r\n    const data = el.dataset;\r\n    if (color_p === 'dark') {\r\n      el.setAttribute('href', data.hrefDark || '');\r\n      darkmode = true;\r\n    } else {\r\n      el.setAttribute('href', data.hrefLight || '');\r\n      darkmode = false;\r\n    }\r\n    data.colorScheme = color_p;\r\n  }\r\n}\r\n\r\nfunction initColorCSS(color_p: string, id = 'css') {\r\n  isCssInit = true;\r\n\r\n  var el_o = document.querySelector('#' + id) as HTMLElement;\r\n  var el: HTMLElement;\r\n  if (el_o !== null) el_o.remove();\r\n  var el_l = document.querySelector('#' + id + '-light') as HTMLElement;\r\n  var el_d = document.querySelector('#' + id + '-dark') as HTMLElement;\r\n  if (color_p === 'dark') {\r\n    el = el_d;\r\n    el_o = el_l;\r\n  } else {\r\n    el = el_l;\r\n    el_o = el_d;\r\n  }\r\n  el.setAttribute('data-href-light', el_l.getAttribute('href') || '');\r\n  el.setAttribute('data-href-dark', el_d.getAttribute('href') || '');\r\n  el.setAttribute('data-color-scheme', color_p);\r\n  el.setAttribute('media', 'all');\r\n  el.setAttribute('id', id);\r\n  el_o.remove();\r\n}\r\n\r\n\r\nexport function setDarkmode(dark: boolean) {\r\n  const color_p = dark ? 'dark' : 'light';\r\n\r\n  if (!isCssInit) initColorCSS(color_p);\r\n\r\n  setColorPreference(color_p, true);\r\n  updateUI(color_p);\r\n}\r\n\r\nexport function getDarkmode() {\r\n  return darkmode;\r\n}\r\n\r\nexport function setThemePreferenceOnLoad() {\r\n  /* Set Preference on load */\r\n  const osColorPreference = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';\r\n  // console.log('OS wants ' + osColorPreference);\r\n  var preferredColorScheme = localStorage.getItem('preferred-color-scheme');\r\n  if (preferredColorScheme !== null) {\r\n    initColorCSS(preferredColorScheme);\r\n  } else {\r\n    preferredColorScheme = osColorPreference;\r\n  }\r\n  setColorPreference(preferredColorScheme, false, true);\r\n  updateUI(preferredColorScheme);\r\n}\r\n","import { useEffect, useState } from \"react\";\r\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger'\r\nimport Tooltip from 'react-bootstrap/Tooltip';\r\n\r\nimport { BsFillMoonStarsFill } from 'react-icons/bs';\r\nimport { FaSun } from 'react-icons/fa';\r\nimport { getDarkmode, setDarkmode } from \".\";\r\nimport './btn-switch.scss';\r\n\r\n\r\nfunction DarkModeSwitch() {\r\n  const [dark, setDark] = useState(false);\r\n  \r\n  // onMount\r\n  useEffect(() => {\r\n    setDark(getDarkmode());\r\n  }, [])\r\n\r\n  // onChange\r\n  useEffect(() => {\r\n    setDarkmode(dark);\r\n  }, [dark])\r\n  \r\n\r\n  const handleChange: React.ChangeEventHandler<HTMLInputElement> = (e) => {\r\n    setDark(e.target.checked);\r\n  }\r\n\r\n  return <OverlayTrigger\r\n    placement=\"left\"\r\n    overlay={<Tooltip>{(dark ? 'Desactivar' : 'Activar') + ' modo oscuro'}</Tooltip>}>\r\n    <label className={\"darkmode-switch\" + (dark ? ' dark' : '')}>\r\n      {(dark) ? <BsFillMoonStarsFill/> : <FaSun />}\r\n      <input\r\n        type=\"checkbox\"\r\n        checked={dark}\r\n        onChange={handleChange} />\r\n    </label>\r\n  </OverlayTrigger>\r\n}\r\n\r\nexport default DarkModeSwitch;","import DarkModeSwitch from \"lib/DarkMode/DarkModeSwitch\";\r\nimport { useEffect, useRef } from \"react\";\r\nimport { Container, Navbar } from \"react-bootstrap\";\r\n\r\n\r\nfunction AppNavbar() {\r\n  const navbarRef = useRef(null as HTMLElement | null);\r\n\r\n  // Navbar hide on scroll\r\n  useEffect(() => {\r\n    var prevScrollPos = window.scrollY;\r\n    const onScrollFn = () => {\r\n      if (!navbarRef.current) return;\r\n      var currentScrollPos = window.scrollY;\r\n      if (prevScrollPos > currentScrollPos) {\r\n        navbarRef.current.classList.remove('hidden');\r\n      } else {\r\n        navbarRef.current.classList.add('hidden');\r\n      }\r\n      prevScrollPos = currentScrollPos;\r\n    }\r\n\r\n    window.addEventListener('scroll', onScrollFn);\r\n    return () => window.removeEventListener('scroll', onScrollFn);\r\n  }, []);\r\n\r\n  return <Navbar\r\n    ref={navbarRef}\r\n    variant=\"dark\"\r\n    className=\"App-header mb-3\"\r\n    fixed=\"top\" >\r\n    <Container>\r\n      <Navbar.Brand>PENSUMS UNAPEC</Navbar.Brand>\r\n\r\n      <DarkModeSwitch />\r\n    </Container>\r\n  </Navbar>\r\n}\r\n\r\nexport default AppNavbar;","\r\nfunction AppFooter() {\r\n  return <footer className=\"mt-3 navbar navbar-expand navbar-light static-bottom\">\r\n    <span>Pensum Extractor DO</span>\r\n    <span>Fernando Rivas, 2021</span>\r\n    <span><a href=\"http://scydact.github.io/\">scydact.github.io</a></span>\r\n    <span>Version v{process.env.REACT_APP_VERSION} | save v{process.env.REACT_APP_SAVE_VERSION}</span>\r\n    <span>\r\n      En caso de problemas o sugerencias,\r\n      favor escribir a <a\r\n        href=\"mailto:scydact@gmail.com?subject=[Pensum Extractor]\">\r\n        scydact@gmail.com</a>.\r\n    </span>\r\n  </footer>\r\n}\r\n\r\nexport default AppFooter;","import './App.scss';\nimport './global-vars.scss';\nimport PensumExtractor from 'components/PensumExtractor';\nimport Container from 'react-bootstrap/Container';\nimport AppNavbar from 'components/AppNavbar';\nimport AppFooter from 'components/AppFooter';\nimport { UniversityProvider } from 'contexts/university-data';\nimport { ActivePensumProvider } from 'contexts/active-pensum';\nimport { useCallback } from 'react';\n\n\nfunction App() {\n\n  // Nested ContextProviders\n  const Providers = useCallback(function Providers(props: any) {\n    return (\n      <UniversityProvider>\n        <ActivePensumProvider>\n          {props.children}\n        </ActivePensumProvider>\n      </UniversityProvider>\n    )\n  }, []);\n\n  return (  \n    <Providers>\n      <AppNavbar />\n\n      <Container fluid className=\"App\">\n        <PensumExtractor />\n      </Container>\n\n      <AppFooter />\n    </Providers>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n// import 'bootstrap-dark-5/dist/css/bootstrap-blackbox.css';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport { setThemePreferenceOnLoad } from 'lib/DarkMode';\n\nsetThemePreferenceOnLoad(); // Load dark mode preference\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}