"use strict";(self.webpackChunkpensum_extractor_react=self.webpackChunkpensum_extractor_react||[]).push([[40],{5040:function(e,t,r){r.r(t),r.d(t,{default:function(){return h},extractPensum:function(){return f},legactExtractPensum:function(){return m}});var n=r(2381),a=r(4824),o=r.n(a),i=r(4125),c=r(7002),u=["","https://api.allorigins.win/raw?url=","https://yacdn.org/serve/","https://cors-anywhere.herokuapp.com/","https://crossorigin.me/","https://cors-proxy.htmldriven.com/?url=","https://thingproxy.freeboard.io/fetch/","http://www.whateverorigin.org/get?url="];function s(e){return l.apply(this,arguments)}function l(){return l=(0,n.Z)(o().mark((function e(t){var r,n,a,i,s,l,p,d=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=d.length>1&&void 0!==d[1]?d[1]:{},n=d.length>2?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:u,i=0,s=o().mark((function e(){var u,s,p,d,h,v,f,m;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=a[i],s=(new Date).getTime(),p=u+t,d=new AbortController,h=d.signal,r.signal=h,v=setTimeout((function(){d.abort(),c.warn("Timed out!")}),4e3),e.prev=7,n&&n("attempt",u,i),e.next=11,fetch(p,r);case 11:if(l=e.sent,n&&n("request",u,i),clearTimeout(v),!l.ok){e.next=24;break}return f=(new Date).getTime(),c.info("CORS proxy '".concat(p,"' succeeded in ").concat(f-s," ms.'")),n&&n("success",u,i),e.next=20,l.text();case 20:return e.t0=e.sent,e.abrupt("return",{v:e.t0});case 24:throw new Error("Response was not OK!");case 25:e.next=34;break;case 27:e.prev=27,e.t1=e.catch(7),clearTimeout(v),m=(new Date).getTime(),c.warn("CORS proxy '".concat(u,"' failed in ").concat(m-s,"ms.'")),c.warn(e.t1),n&&n("error",u,i);case 34:return e.prev=34,++i,e.finish(34);case 37:case"end":return e.stop()}}),e,null,[[7,27,34,37]])}));case 5:if(!(i<a.length)){e.next=12;break}return e.delegateYield(s(),"t0",7);case 7:if("object"!==typeof(p=e.t0)){e.next=10;break}return e.abrupt("return",p.v);case 10:e.next=5;break;case 12:return e.abrupt("return",null);case 13:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}var p=r(4655),d=r(7002);function h(e,t){return v.apply(this,arguments)}function v(){return v=(0,n.Z)(o().mark((function e(t,r){var n,a,i,c,u,l,p,d=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d.length>2&&void 0!==d[2]?d[2]:"https://servicios.unapec.edu.do/pensum/Main/Detalles/",a=n+t,i={cache:"force-cache"},e.next=5,s(a,i,r);case 5:if(c=e.sent){e.next=8;break}return e.abrupt("return",null);case 8:return u=new DOMParser,l=u.parseFromString(c,"text/xml"),p=f(l,a),e.abrupt("return",p);case 12:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)}function f(e,t){try{var r=m(e),n=(0,i.qi)(r,"unapec");return n.fetchDate=(0,p.kN)(new Date),n.src={type:"online",date:n.fetchDate,url:t},n}catch(a){return d.error(a),null}}function m(e){var t,r,n,a,o,i,c={carrera:"",codigo:"",vigencia:"",infoCarrera:[],cuats:[],version:2};if(0===e.getElementsByClassName("contPensum").length||e.getElementsByClassName("contPensum")[0].children.length<2)throw new Error("Document has no pensum inside!");var u=e.getElementsByClassName("cabPensum")[0];if(!u)throw new Error("Unable to get table element.");c.carrera=(null===u||void 0===u||null===(t=u.firstElementChild)||void 0===t||null===(r=t.textContent)||void 0===r?void 0:r.trim())||"";var s=u.getElementsByTagName("p")[0].children;if(c.codigo=(null===(n=s[0])||void 0===n||null===(a=n.textContent)||void 0===a?void 0:a.trim())||"",c.vigencia=(null===(o=s[1])||void 0===o||null===(i=o.textContent)||void 0===i?void 0:i.trim())||"",""===c.carrera)throw new Error("Unable to get pensum name");if(""===c.codigo)throw new Error("Unable to get pensum code");for(var l=e.getElementsByClassName("infoCarrera")[0].children,p=0;p<l.length;++p){var d,h,v;c.infoCarrera.push((null===(d=l[p])||void 0===d||null===(h=d.textContent)||void 0===h||null===(v=h.replace(/\n/g," "))||void 0===v?void 0:v.trim())||"")}for(var f=e.getElementsByClassName("cuatrim"),m=0;m<f.length;++m){for(var g=f[m].children,w=[],x=1;x<g.length;++x){var b,C,y,E,k,D,T={codigo:"",asignatura:"",creditos:0},N=[],B=[];T.prereq=N,T.prereqExtra=B;var P=g[x].children;if(T.codigo=(null===(b=P[0])||void 0===b||null===(C=b.textContent)||void 0===C?void 0:C.trim())||"",T.asignatura=(null===(y=P[1])||void 0===y||null===(E=y.textContent)||void 0===E?void 0:E.trim())||"",T.creditos=parseFloat((null===(k=P[2])||void 0===k?void 0:k.textContent)||"-Infinity"),""===T.codigo)throw new Error("Unable to get code for mat ".concat(T.asignatura," @ cuat ").concat(m+1));if(""===T.asignatura)throw new Error("Unable to get name for mat ".concat(T.codigo," @ cuat ").concat(m+1));if(T.creditos===-1/0)throw new Error("Unable to get creds for mat ".concat(T.codigo,":").concat(T.asignatura," @ cuat ").concat(m+1));for(var U=((null===(D=P[3])||void 0===D?void 0:D.textContent)||"").replace(/\n/g,",").split(",").map((function(e){return e.trim()})).filter((function(e){return""!==e})),q=0;q<U.length;q++){var O=U[q];O.length<8?N.push(O):B.push(O)}w.push(T)}c.cuats.push(w)}return c}}}]);
//# sourceMappingURL=40.5d86a865.chunk.js.map