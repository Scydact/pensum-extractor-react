(this["webpackJsonppensum-extractor-react"]=this["webpackJsonppensum-extractor-react"]||[]).push([[0],{100:function(e,t,r){},101:function(e,t,r){},118:function(e,t,r){},121:function(e,t,r){},122:function(e,t,r){},123:function(e,t,r){},124:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r.n(n),c=r(15),o=r.n(c),s=(r(99),r(100),r(101),r(10)),i=r(17),u=r.n(i),l=r(26),d="./pensum/universities.json",p="index.json";function f(){return(f=Object(l.a)(u.a.mark((function e(){var t,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(d);case 2:return t=e.sent,e.next=5,t.json();case 5:if("object"===typeof(r=e.sent)){e.next=8;break}throw TypeError("Invalid universities.json format.");case 8:if(r.universities){e.next=10;break}throw TypeError("Invalid universities.json format.");case 10:return e.abrupt("return",r);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(){return(j=Object(l.a)(u.a.mark((function e(t){var r,n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",{university:"",api:null,careers:[]});case 2:return r="./pensum/"+t.toLowerCase()+"/"+p,e.next=5,fetch(r);case 5:return n=e.sent,e.next=8,n.json();case 8:if("object"===typeof(a=e.sent)){e.next=11;break}throw TypeError("Invalid careers.json format.");case 11:if(a.api&&a.university&&a.careers){e.next=13;break}throw TypeError("Invalid careers.json format.");case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var b=r(3),v=r(24);function h(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(0===t.length)return function(e,t){return e>t?1:-1};if(1===t.length){var n=t[0];return function(e,t){return e[n]>t[n]?1:-1}}return function(e,r){var n,a=Object(v.a)(t);try{for(a.s();!(n=a.n()).done;){var c=n.value;if(e[c]>r[c])return 1}}catch(o){a.e(o)}finally{a.f()}return-1}}var m=r(2);function O(e,t){switch(t.type){case"set/universities":return Object(b.a)(Object(b.a)({},e),{},{universities:t.payload});case"set/selected":return Object(b.a)(Object(b.a)({},e),{},{selected:t.payload});case"set/loading":return Object(b.a)(Object(b.a)({},e),{},{loading:t.payload});case"set/error":return Object(b.a)(Object(b.a)({},e),{},{error:t.payload});default:return console.error("Unknown action: ",t),e}}var y={universities:[],selected:null,loading:!0,error:null},x=Object(n.createContext)({state:y,dispatch:{}}),g=Object(n.memo)((function(e){var t=e.children,r=Object(n.useReducer)(O,y),a=Object(s.a)(r,2),c=a[0],o=a[1];return Object(n.useEffect)((function(){(function(){return f.apply(this,arguments)})().then((function(e){var t=e.universities.sort(h("longName"));o({type:"set/universities",payload:t})})).catch((function(e){o({type:"set/error",payload:e})})).finally((function(){o({type:"set/loading",payload:!1})}))}),[]),Object(m.jsx)(x.Provider,{value:{state:c,dispatch:o},children:t})})),w=x,k=r(91),N=r(94),S=r(37),q=r(84),E=r(93),C=(r(118),{option:function(e,t){t.data,t.isDisabled,t.isFocused;var r=t.isSelected;return Object(b.a)(Object(b.a)({},e),{},{color:r?"white":void 0})}}),A=function(e){return Object(b.a)(Object(b.a)({},e),{},{colors:Object(b.a)(Object(b.a)({},e.colors),{},{primary:"var(--bs-primary)",primary75:"rgba(var(--bs-primary-rgb), 0.75)",primary50:"rgba(var(--bs-primary-rgb), 0.50)",primary25:"rgba(var(--bs-primary-rgb), 0.25)",danger:"var(--bs-danger)",dangerLight:"rgba(var(--bs-danger-rgb), 0.25)",neutral0:"var(--bs-body-bg)",neutral5:"var(--th-gray-50)",neutral10:"var(--th-gray-100)",neutral20:"var(--th-gray-200)",neutral30:"var(--th-gray-300)",neutral40:"var(--th-gray-400)",neutral50:"var(--th-gray-500)",neutral60:"var(--th-gray-600)",neutral70:"var(--th-gray-700)",neutral80:"var(--th-gray-800)",neutral90:"var(--th-gray-900)"})})},M=r(29),L=r(41),D=r(45),I=r(92),P=r(19);function U(e,t){if(!e)return null;if(e.version<=3){var r=function(e,t){var r={version:Number("5.0"),institution:t,code:e.codigo,publishDate:e.vigencia,fetchDate:"2021-04-24",career:e.carrera,info:e.infoCarrera,loose:[],periods:[]};if(!e.cuats||!e.cuats.length)return console.warn("Pensum ".concat(e.codigo," (").concat(e.carrera,") did not contain any cuat!")),r;var n=function(e){return e?"string"===typeof e?[e]:Array.isArray(e)?Object(P.a)(e):(console.warn("Unknown requirement!: ",e),[]):[]},a=function(e){var t,r,a={code:e.codigo,name:e.asignatura,cr:e.creditos,prereq:[],coreq:[]};return(t=a.prereq).push.apply(t,Object(P.a)(n(e.prereq))),(r=a.prereq).push.apply(r,Object(P.a)(n(e.prereqExtra).map((function(e){return{text:e}})))),a};return e.cuats.forEach((function(e){var t,n=[],c=Object(v.a)(e);try{for(c.s();!(t=c.n()).done;){var o=t.value,s=a(o);n.push(s)}}catch(i){c.e(i)}finally{c.f()}r.periods.push(n)})),r}(e,t);return console.warn("Loaded pensum from old version!"),r}return 5===e.version?function(e){var t=function(e){return Object(b.a)(Object(b.a)({},e),{},{prereq:e.prereq?e.prereq:[],coreq:e.coreq?e.coreq:[]})},r=e.loose.map((function(e){return t(e)})),n=e.periods.map((function(e){return e.map((function(e){return t(e)}))}));return Object(b.a)(Object(b.a)({},e),{},{loose:r,periods:n})}(e):(console.warn("Pensum did not load correctly!",e),null)}var F="pensumextractor",T="./pensum";function B(e,t){return J.apply(this,arguments)}function J(){return(J=Object(l.a)(u.a.mark((function e(t,r){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&r){e.next=2;break}throw new W("No university or code provided!");case 2:return e.next=4,R(t,r);case 4:if(!(n=e.sent)){e.next=7;break}return e.abrupt("return",n);case 7:return e.next=9,Q(t,r);case 9:if(!(n=e.sent)){e.next=12;break}return e.abrupt("return",n);case 12:throw new W("Unable to fetch pensum with identifier ".concat(t,"/").concat(r));case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e,t){return Y.apply(this,arguments)}function Y(){return(Y=Object(l.a)(u.a.mark((function e(t,r){var n,a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[F,t,r].join("_"),a=localStorage.getItem(n)){e.next=4;break}return e.abrupt("return",null);case 4:return c=JSON.parse(a),e.abrupt("return",U(c,t));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(e,t){return V.apply(this,arguments)}function V(){return(V=Object(l.a)(u.a.mark((function e(t,r){var n,a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[T,t,r].join("/")+".json",e.prev=1,e.next=4,fetch(n);case 4:return c=e.sent,e.next=7,c.json();case 7:a=e.sent,e.next=13;break;case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",null);case 13:return e.abrupt("return",U(a,t));case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}var W=function(e){Object(L.a)(r,e);var t=Object(D.a)(r);function r(e){return Object(M.a)(this,r),t.call(this,e)}return r}(Object(I.a)(Error));var _=function(e){if(!e)return{list:[],periodMap:new Map,codeMap:new Map,postreqMap:new Map,looseUnhandled:new Set};var t=new Map,r=new Map,n=new Map,a=[],c=[],o=function(e,n){t.has(e.code)&&c.push({code:e.code,text:"was already registered!"}),t.set(e.code,e),r.set(e.code,n),a.push(e)};e.loose.forEach((function(e){return o(e,0)})),e.periods.forEach((function(e,t){e.forEach((function(e){return o(e,t+1)}))}));for(var s=0,i=a;s<i.length;s++){var u,l=i[s],d=l.code,p=Object(v.a)(l.prereq);try{for(p.s();!(u=p.n()).done;){var f=u.value;if("string"===typeof f){var j=n.get(f);j?j.push(d):n.set(f,[d])}}}catch(g){p.e(g)}finally{p.f()}}for(var b=new Set(t.keys()),h=new Set(n.keys()),m=new Set(Array.from(h).filter((function(e){return!b.has(e)}))),O=0,y=c;O<y.length;O++){var x=y[O];console.warn("Warning at pensum-get-extras [".concat(x.code,"]: ").concat(x.text))}return{list:a,periodMap:r,codeMap:t,postreqMap:n,looseUnhandled:m}};function z(e){var t=Object(b.a)({},e);return t.prereq&&0===t.prereq.length&&delete t.prereq,t.coreq&&0===t.coreq.length&&delete t.coreq,t}var G=function(e){return Object(b.a)(Object(b.a)({},e),{},{loose:e.loose.map((function(e){return z(e)})),periods:e.periods.map((function(e){return e.map((function(e){return z(e)}))}))})},H="pensumData";function K(e){return{pensum:e,matData:_(e),error:null}}function X(e,t){switch(t.type){case"clear":return K(null);case"set":return function(e){if(e){var t=G(e);localStorage.setItem(H,JSON.stringify(t))}else localStorage.removeItem(H)}(t.payload),K(t.payload);case"load/fromSave":return K(function(){var e=localStorage.getItem(H);if(!e)return null;var t=JSON.parse(e);return U(t,t.institution)}());case"error":return console.error(t.payload),Object(b.a)(Object(b.a)({},e),{},{error:t.payload});default:return console.error('Unknown action "'+t.type+'".'),e}}var Z={state:{pensum:null,matData:_(null),error:null},dispatch:function(){}},$=Object(n.createContext)(Z),ee=Object(n.memo)((function(e){var t=e.children,r=Object(n.useReducer)(X,Z.state),a=Object(s.a)(r,2),c=a[0],o=a[1];Object(n.useEffect)((function(){o({type:"load/fromSave"})}),[]);var i=Object(n.useCallback)(function(){var e=Object(l.a)(u.a.mark((function e(t){var r,n,a,c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.type,e.next="load"===e.t0?3:19;break;case 3:return r=t.payload,n=r.university,a=r.code,e.prev=4,e.next=7,B(n,a);case 7:c=e.sent,o({type:"set",payload:c}),e.next=16;break;case 11:e.prev=11,e.t1=e.catch(4),s={type:"error",payload:void 0},e.t1 instanceof SyntaxError?s.payload="JSON could not be parsed for ".concat(n,"/").concat(a,"."):e.t1 instanceof W?s.payload=e.t1.message:s.payload=e.t1,o(s);case 16:return e.prev=16,e.abrupt("break",20);case 19:o(t);case 20:case"end":return e.stop()}}),e,null,[[4,11,16,19]])})));return function(t){return e.apply(this,arguments)}}(),[]);return Object(m.jsx)($.Provider,{value:{state:c,dispatch:i},children:t})})),te=$;function re(e,t){return"[".concat(e,"] ").concat(t)}var ne=function(){var e=Object(n.useContext)(te),t=e.state,r=t.pensum,a=t.error,c=e.dispatch,o=Object(n.useContext)(w),i=o.state,u=o.dispatch,l=i.universities,d=i.selected,p=i.loading,f=i.error,b=Object(n.useState)(void 0),v=Object(s.a)(b,2),O=v[0],y=v[1],x=Object(n.useState)(null),g=Object(s.a)(x,2),M=g[0],L=g[1];Object(n.useEffect)((function(){if(r){var e=l.find((function(e){return e.code===r.institution}));e&&u({type:"set/selected",payload:e});var t=I.find((function(e){return e.value===r.code}))||{value:r.code,label:re(r.code,r.career)};L(t)}else L(null)}),[r,null===r||void 0===r?void 0:r.code,null===r||void 0===r?void 0:r.career,null===r||void 0===r?void 0:r.institution]);var D=Object(n.useMemo)((function(){return i.universities.map((function(e){return{value:e.code,label:re(e.shortName,e.longName)}}))}),[i,i.universities]);Object(n.useEffect)((function(){u({type:"set/selected",payload:l[0]||null})}),[l]);var I=Object(n.useMemo)((function(){return O?O.careers.sort(h("code")).map((function(e){return{value:e.code,label:re(e.code,e.name)}})):[]}),[O]);Object(n.useEffect)((function(){if(!d)return y(void 0),void L(null);u({type:"set/loading",payload:!0}),function(e){return j.apply(this,arguments)}(null===d||void 0===d?void 0:d.code).then((function(e){y(e)})).catch((function(e){console.warn("Unable to load pensums for ".concat(null===d||void 0===d?void 0:d.code,": "),e),y(void 0)})).finally((function(){u({type:"set/loading",payload:!1})}))}),[d,u]);var P=Object(m.jsxs)(k.a,{onSubmit:function(e){e.preventDefault(),c({type:"load",payload:{university:(null===d||void 0===d?void 0:d.code)||"",code:(null===M||void 0===M?void 0:M.value)||""}})},children:[Object(m.jsx)(q.a,{value:D.find((function(e){return e.value===(null===d||void 0===d?void 0:d.code)})),options:D,isSearchable:!0,isLoading:p,onChange:function(e){if(e){var t=l.find((function(t){return t.code===e.value}))||null;u({type:"set/selected",payload:t}),e.value!==(null===t||void 0===t?void 0:t.code)&&L(null)}else u({type:"set/selected",payload:null})},name:"university",className:"mb-2",theme:A,styles:C}),Object(m.jsx)(E.a,{isClearable:!0,value:M,options:I,isLoading:p,loadingMessage:function(){return Object(m.jsx)("span",{children:"Cargando carreras..."})},onChange:function(e){L(e)},className:"mb-2",theme:A,styles:C}),Object(m.jsx)(N.a,{type:"submit",disabled:!M,className:"w-100",children:"Cargar"}),f&&Object(m.jsx)("p",{style:{color:"red"},children:"Error @ uni: "+String(f)}),a&&Object(m.jsx)("p",{style:{color:"red"},children:"Error @ pensum: "+String(a)})]});return Object(m.jsx)(S.a,{children:Object(m.jsx)(S.a.Body,{children:P})})},ae=(r(121),r(61)),ce=r(39),oe=r(14);r(122);var se=function(e){var t,r,a=e.data,c=e.type,o=Object(n.useContext)(te).state.matData,s=["mat-code",c];return"string"===typeof a?(t=a,s.push("code"),o.looseUnhandled.has(a)&&s.push("missing")):(t=a.text,s.push("req-text")),Object(m.jsx)("span",{className:(r=s,r.filter(Boolean).join(" ")),children:t})};function ie(){return Object(m.jsxs)(ce.a,{className:"pensum-header row-period",children:[Object(m.jsx)(oe.a,{className:"row-period-num",children:"Qt."}),Object(m.jsx)(oe.a,{className:"row-mat-group",children:Object(m.jsxs)(ce.a,{className:"row-mat",children:[Object(m.jsx)(oe.a,{className:"row-code",children:"C\xf3digo"}),Object(m.jsx)(oe.a,{children:Object(m.jsxs)(ce.a,{children:[Object(m.jsx)(oe.a,{className:"row-name",children:"Asignatura"}),Object(m.jsx)(oe.a,{className:"row-cr",children:"Cr."}),Object(m.jsx)(oe.a,{className:"row-prereq",children:"Requisitos"})]})})]})})]})}function ue(e){var t=e.mat,r="row-mat";1&e.idx&&(r+=" even");var n=[];return n.push.apply(n,Object(P.a)(t.prereq.map((function(e,t){return Object(m.jsx)(se,{data:e,type:"prereq"},t)})))),Object(m.jsxs)(ce.a,{className:r,"data-mat":t.code,children:[Object(m.jsx)(oe.a,{className:"row-code code",children:t.code}),Object(m.jsx)(oe.a,{children:Object(m.jsxs)(ce.a,{children:[Object(m.jsx)(oe.a,{className:"row-name",children:t.name}),Object(m.jsx)(oe.a,{className:"row-cr",children:t.cr}),Object(m.jsx)(oe.a,{className:"row-req",children:n})]})})]})}function le(e){var t=e.period,r=e.cuat,n=e.cumlen,a=void 0===n?0:n;return Object(m.jsxs)(ce.a,{className:"row-period",children:[Object(m.jsx)(oe.a,{className:"row-period-num","data-value":r+1,children:r+1})," ",Object(m.jsx)(oe.a,{className:"row-mat-group",children:t.map((function(e,t){return Object(m.jsx)(ue,{mat:e,idx:t+a},e.code)}))})]})}var de=function(e){var t,r=e.pensum.periods,n=r.map((function(e){return e.length})).map((t=0,function(e){return t+=e}));return Object(m.jsxs)(ae.a,{className:"pensum-table",children:[Object(m.jsx)(ie,{}),r.map((function(e,t){return Object(m.jsx)(le,{period:e,cuat:t,cumlen:n[t-1]},t)}))]})};var pe=function(e){var t=e.pensum;return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(S.a,{children:Object(m.jsxs)(S.a.Body,{className:"pensum-table-container",children:[Object(m.jsx)(S.a.Title,{children:t.career}),Object(m.jsx)(de,{pensum:t})]})})})};var fe=function(e){var t=Object(n.useContext)(te).state.pensum;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(ne,{}),t&&Object(m.jsx)(pe,{pensum:t})]})},je=r(90),be=r(86),ve=r(87),he=r(88),me=!1,Oe=!1;function ye(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=e,a="light"===e?"dark":"light",c=document.body;c.classList.add("color-scheme-"+n),c.classList.remove("color-scheme-"+a),r||(c.classList.add("color-scheme-transition"),setTimeout((function(){c.classList.remove("color-scheme-transition")}),500)),t&&localStorage.setItem("preferred-color-scheme",e)}function xe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"css";if(me){var r=document.querySelector("#"+t),n=r.dataset;"dark"===e?(r.setAttribute("href",n.hrefDark||""),Oe=!0):(r.setAttribute("href",n.hrefLight||""),Oe=!1),n.colorScheme=e}}function ge(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"css";me=!0;var r,n=document.querySelector("#"+t);null!==n&&n.remove();var a=document.querySelector("#"+t+"-light"),c=document.querySelector("#"+t+"-dark");"dark"===e?(r=c,n=a):(r=a,n=c),r.setAttribute("data-href-light",a.getAttribute("href")||""),r.setAttribute("data-href-dark",c.getAttribute("href")||""),r.setAttribute("data-color-scheme",e),r.setAttribute("media","all"),r.setAttribute("id",t),n.remove()}r(123);var we=function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),r=t[0],a=t[1];return Object(n.useEffect)((function(){a(Oe)}),[]),Object(n.useEffect)((function(){!function(e){var t=e?"dark":"light";me||ge(t),ye(t,!0),xe(t)}(r)}),[r]),Object(m.jsx)(je.a,{placement:"left",overlay:Object(m.jsx)(be.a,{children:(r?"Desactivar":"Activar")+" modo oscuro"}),children:Object(m.jsxs)("label",{className:"darkmode-switch"+(r?" dark":""),children:[r?Object(m.jsx)(ve.a,{}):Object(m.jsx)(he.a,{}),Object(m.jsx)("input",{type:"checkbox",checked:r,onChange:function(e){a(e.target.checked)}})]})})},ke=r(130);var Ne=function(){var e=Object(n.useRef)(null);return Object(n.useEffect)((function(){var t=window.scrollY,r=function(){if(e.current){var r=window.scrollY;t>r?e.current.classList.remove("hidden"):e.current.classList.add("hidden"),t=r}};return window.addEventListener("scroll",r),function(){return window.removeEventListener("scroll",r)}}),[]),Object(m.jsx)(ke.a,{ref:e,variant:"dark",className:"App-header mb-3",fixed:"top",children:Object(m.jsxs)(ae.a,{children:[Object(m.jsx)(ke.a.Brand,{children:"PENSUMS UNAPEC"}),Object(m.jsx)(we,{})]})})};var Se=function(){return Object(m.jsxs)("footer",{className:"mt-3 navbar navbar-expand navbar-light static-bottom",children:[Object(m.jsx)("span",{children:"Pensum Extractor DO"}),Object(m.jsx)("span",{children:"Fernando Rivas, 2021"}),Object(m.jsx)("span",{children:Object(m.jsx)("a",{href:"http://scydact.github.io/",children:"scydact.github.io"})}),Object(m.jsxs)("span",{children:["Version v","1.0"," | save v","5.0"]}),Object(m.jsxs)("span",{children:["En caso de problemas o sugerencias, favor escribir a ",Object(m.jsx)("a",{href:"mailto:scydact@gmail.com?subject=[Pensum Extractor]",children:"scydact@gmail.com"}),"."]})]})};var qe=function(){var e=Object(n.useCallback)((function(e){return Object(m.jsx)(g,{children:Object(m.jsx)(ee,{children:e.children})})}),[]);return Object(m.jsxs)(e,{children:[Object(m.jsx)(Ne,{}),Object(m.jsx)(ae.a,{fluid:!0,className:"App",children:Object(m.jsx)(fe,{})}),Object(m.jsx)(Se,{})]})},Ee=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,131)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;r(e),n(e),a(e),c(e),o(e)}))};!function(){var e=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",t=localStorage.getItem("preferred-color-scheme");null!==t?ge(t):t=e,ye(t,!1,!0),xe(t)}(),o.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(qe,{})}),document.getElementById("root")),Ee()},99:function(e,t,r){}},[[124,1,2]]]);
//# sourceMappingURL=main.a63447ea.chunk.js.map